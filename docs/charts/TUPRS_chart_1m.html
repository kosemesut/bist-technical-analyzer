<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUPRS - Teknik Analiz</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body { margin: 0; padding: 20px; background: #f5f5f5; font-family: 'Segoe UI', Arial, sans-serif; }
        .chart-container { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h2 { margin: 0 0 20px 0; color: #1a1a1a; font-size: 24px; }
    </style>
</head>
<body>
    <div class="chart-container">
        <h2>ðŸ“Š TUPRS - Teknik Analiz GrafiÄŸi</h2>
        <div id="chart" style="width:100%; height:800px;"></div>
    </div>
    <script>
        // Data preparation
        var dates = ['2026-01-09 06:30', '2026-01-09 07:30', '2026-01-09 08:30', '2026-01-09 09:30', '2026-01-09 10:30', '2026-01-09 11:30', '2026-01-09 12:30', '2026-01-09 13:30', '2026-01-09 14:30', '2026-01-12 06:30', '2026-01-12 07:30', '2026-01-12 08:30', '2026-01-12 09:30', '2026-01-12 10:30', '2026-01-12 11:30', '2026-01-12 12:30', '2026-01-12 13:30', '2026-01-12 14:30', '2026-01-13 06:30', '2026-01-13 07:30', '2026-01-13 08:30', '2026-01-13 09:30', '2026-01-13 10:30', '2026-01-13 11:30', '2026-01-13 12:30', '2026-01-13 13:30', '2026-01-13 14:30', '2026-01-14 06:30', '2026-01-14 07:30', '2026-01-14 08:30', '2026-01-14 09:30', '2026-01-14 10:30', '2026-01-14 11:30', '2026-01-14 12:30', '2026-01-14 13:30', '2026-01-14 14:30', '2026-01-15 06:30', '2026-01-15 07:30', '2026-01-15 08:30', '2026-01-15 09:30', '2026-01-15 10:30', '2026-01-15 11:30', '2026-01-15 12:30', '2026-01-15 13:30', '2026-01-15 14:30', '2026-01-16 06:30', '2026-01-16 07:30', '2026-01-16 08:30', '2026-01-16 09:30', '2026-01-16 10:30', '2026-01-16 11:30', '2026-01-16 12:30', '2026-01-16 13:30', '2026-01-16 14:30', '2026-01-19 06:30', '2026-01-19 07:30', '2026-01-19 08:30', '2026-01-19 09:30', '2026-01-19 10:30', '2026-01-19 11:30', '2026-01-19 12:30', '2026-01-19 13:30', '2026-01-19 14:30', '2026-01-20 06:30', '2026-01-20 07:30', '2026-01-20 08:30', '2026-01-20 09:30', '2026-01-20 10:30', '2026-01-20 11:30', '2026-01-20 12:30', '2026-01-20 13:30', '2026-01-20 14:30', '2026-01-21 06:30', '2026-01-21 07:30', '2026-01-21 08:30', '2026-01-21 09:30', '2026-01-21 10:30', '2026-01-21 11:30', '2026-01-21 12:30', '2026-01-21 13:30', '2026-01-21 14:30', '2026-01-22 06:30', '2026-01-22 07:30', '2026-01-22 08:30', '2026-01-22 09:30', '2026-01-22 10:30', '2026-01-22 11:30', '2026-01-22 12:30', '2026-01-22 13:30', '2026-01-22 14:30', '2026-01-23 06:30', '2026-01-23 07:30', '2026-01-23 08:30', '2026-01-23 09:30', '2026-01-23 10:30', '2026-01-23 11:30', '2026-01-23 12:30', '2026-01-23 13:30', '2026-01-23 14:30', '2026-01-26 06:30', '2026-01-26 07:30', '2026-01-26 08:30', '2026-01-26 09:30', '2026-01-26 10:30', '2026-01-26 11:30', '2026-01-26 12:30', '2026-01-26 13:30', '2026-01-26 14:30', '2026-01-27 06:30', '2026-01-27 07:30', '2026-01-27 08:30', '2026-01-27 09:30', '2026-01-27 10:30', '2026-01-27 11:30', '2026-01-27 12:30', '2026-01-27 13:30', '2026-01-27 14:30', '2026-01-28 06:30', '2026-01-28 07:30', '2026-01-28 08:30', '2026-01-28 09:30', '2026-01-28 10:30', '2026-01-28 11:30', '2026-01-28 12:30', '2026-01-28 13:30', '2026-01-28 14:30', '2026-01-29 06:30', '2026-01-29 07:30', '2026-01-29 08:30', '2026-01-29 09:30', '2026-01-29 10:30', '2026-01-29 11:30', '2026-01-29 12:30', '2026-01-29 13:30', '2026-01-29 14:30', '2026-01-30 06:30', '2026-01-30 07:30', '2026-01-30 08:30', '2026-01-30 09:30', '2026-01-30 10:30', '2026-01-30 11:30', '2026-01-30 12:30', '2026-01-30 13:30', '2026-01-30 14:30', '2026-02-02 06:30', '2026-02-02 07:30', '2026-02-02 08:30', '2026-02-02 09:30', '2026-02-02 10:30', '2026-02-02 11:30', '2026-02-02 12:30', '2026-02-02 13:30', '2026-02-02 14:30', '2026-02-03 06:30', '2026-02-03 07:30', '2026-02-03 08:30', '2026-02-03 09:30', '2026-02-03 10:30', '2026-02-03 11:30', '2026-02-03 12:30', '2026-02-03 13:30', '2026-02-03 14:30', '2026-02-04 06:30', '2026-02-04 07:30', '2026-02-04 08:30', '2026-02-04 09:30', '2026-02-04 10:30', '2026-02-04 11:30', '2026-02-04 12:30', '2026-02-04 13:30', '2026-02-04 14:30', '2026-02-05 06:30', '2026-02-05 07:30', '2026-02-05 08:30', '2026-02-05 09:30', '2026-02-05 10:30', '2026-02-05 11:30', '2026-02-05 12:30', '2026-02-05 13:30', '2026-02-05 14:30', '2026-02-06 06:30', '2026-02-06 07:30', '2026-02-06 08:30', '2026-02-06 09:30', '2026-02-06 10:30', '2026-02-06 11:30', '2026-02-06 12:30', '2026-02-06 13:30', '2026-02-06 14:30', '2026-02-06 15:00']

        var prices = [198.90, 197.70, 198.30, 196.70, 196.00, 197.00, 196.10, 196.70, 197.80, 199.20, 198.90, 199.20, 199.30, 199.90, 200.50, 200.60, 202.90, 203.00, 206.50, 204.80, 206.70, 207.20, 205.10, 208.10, 208.10, 207.70, 208.20, 213.60, 214.90, 215.50, 216.90, 218.50, 217.50, 217.90, 218.80, 219.40, 213.20, 216.30, 217.60, 217.90, 217.80, 216.50, 216.90, 218.00, 218.10, 219.10, 219.80, 218.10, 219.00, 219.90, 220.80, 221.10, 223.30, 222.70, 219.90, 222.20, 220.00, 220.30, 221.70, 223.40, 225.40, 224.90, 223.00, 222.80, 225.80, 223.80, 226.70, 225.80, 226.40, 227.20, 224.60, 226.00, 228.60, 227.70, 224.20, 219.90, 217.40, 217.80, 218.60, 221.00, 221.00, 226.20, 223.30, 224.00, 223.50, 221.50, 220.10, 222.30, 225.20, 226.30, 229.00, 227.40, 228.10, 227.90, 226.90, 226.50, 225.90, 225.20, 225.90, 226.40, 224.80, 224.30, 225.00, 224.90, 225.50, 226.90, 226.60, 226.90, 226.90, 225.40, 224.20, 223.50, 226.30, 226.60, 226.80, 226.50, 227.70, 231.00, 236.90, 237.20, 239.20, 238.50, 238.90, 240.40, 243.60, 243.20, 244.20, 244.10, 241.50, 242.40, 242.40, 245.60, 245.00, 245.70, 247.80, 244.90, 242.30, 242.90, 241.70, 243.70, 243.10, 243.90, 244.80, 245.60, 234.60, 227.30, 228.00, 229.70, 233.60, 233.00, 232.00, 230.00, 229.60, 233.20, 233.40, 231.40, 229.20, 229.60, 229.70, 231.50, 230.70, 232.40, 234.90, 235.10, 231.80, 232.30, 230.80, 232.20, 231.50, 231.40, 230.60, 233.10, 231.00, 229.40, 229.90, 229.00, 227.70, 228.70, 227.10, 227.00, 228.10, 225.40, 226.30, 225.20, 225.20, 224.50, 223.30, 223.40, 224.20, 223.00];

        var dailyChanges = [0.71, -0.65, 0.30, -0.86, -0.36, 0.51, -0.51, 0.31, 0.56, 0.61, -0.10, 0.15, 0.00, 0.30, 0.30, 0.00, 1.15, -0.10, 1.37, -0.87, 0.93, 0.24, -0.97, 1.51, 0.05, -0.19, 0.19, 2.54, 0.61, 0.28, 0.70, 0.74, -0.46, 0.14, 0.46, 0.32, -1.84, 1.45, 0.55, 0.18, -0.05, -0.64, 0.18, 0.55, 0.05, 0.23, 0.32, -0.73, 0.37, 0.46, 0.41, 0.14, 1.00, -0.22, -1.17, 1.05, -1.03, 0.09, 0.64, 0.81, 0.90, -0.27, -0.80, -0.04, 1.35, -0.89, 1.25, -0.40, 0.22, 0.40, -1.14, 0.62, 0.04, -0.44, -1.54, -1.92, -1.09, 0.18, 0.37, 1.10, 0.00, 1.25, -1.28, 0.31, -0.22, -0.89, -0.59, 1.00, 1.26, 0.44, 0.48, -0.74, 0.31, -0.04, -0.44, -0.18, -0.26, -0.35, 0.36, 0.85, -0.71, -0.22, 0.36, 0.00, 0.31, 0.62, -0.13, 0.09, -0.04, -0.66, -0.53, -0.27, 1.30, 0.13, 0.04, -0.09, 0.57, 1.18, 2.55, 0.08, 0.80, -0.29, 0.13, 0.63, 1.37, -0.12, 0.08, -0.04, -1.02, 0.37, 0.00, 1.32, -0.28, 0.33, 0.90, -0.81, -1.06, 0.25, -0.49, 0.79, -0.25, 0.33, 0.37, 0.29, -2.21, -3.11, 0.31, 0.75, 1.65, -0.26, -0.39, -0.86, -0.22, 0.65, 0.09, -0.86, -0.95, 0.17, 0.04, 0.78, -0.30, 0.78, 0.17, 0.09, -1.36, 0.26, -0.65, 0.61, -0.34, -0.04, -0.30, 1.70, -0.90, -0.74, 0.22, -0.43, -0.52, 0.44, -0.70, -0.04, 0.66, -1.18, 0.40, -0.49, 0.04, -0.27, -0.53, 0.04, 0.40, 0.00]

        var sma20 = [198.21, 198.11, 198.09, 197.93, 197.76, 197.63, 197.42, 197.27, 197.18, 197.20, 197.22, 197.34, 197.47, 197.62, 197.81, 198.01, 198.31, 198.60, 199.05, 199.50, 199.89, 200.36, 200.70, 201.28, 201.88, 202.42, 203.02, 203.87, 204.72, 205.53, 206.43, 207.40, 208.31, 209.21, 210.13, 211.06, 211.58, 212.24, 212.80, 213.45, 214.01, 214.48, 215.06, 215.56, 216.06, 216.63, 217.21, 217.43, 217.64, 217.86, 218.06, 218.19, 218.48, 218.72, 218.77, 218.91, 219.25, 219.45, 219.66, 219.93, 220.31, 220.73, 221.03, 221.28, 221.66, 221.89, 222.24, 222.62, 222.99, 223.36, 223.55, 223.79, 224.06, 224.31, 224.52, 224.41, 224.28, 224.15, 224.00, 223.88, 223.66, 223.73, 223.74, 223.80, 223.68, 223.57, 223.24, 223.07, 223.01, 222.96, 223.18, 223.25, 223.23, 223.23, 223.37, 223.70, 224.13, 224.49, 224.86, 225.13, 225.32, 225.22, 225.31, 225.35, 225.45, 225.72, 226.05, 226.28, 226.36, 226.32, 226.08, 225.88, 225.79, 225.73, 225.72, 225.72, 225.81, 226.10, 226.65, 227.19, 227.91, 228.62, 229.32, 230.09, 231.00, 231.81, 232.69, 233.55, 234.28, 235.13, 236.04, 237.15, 238.08, 239.04, 240.09, 241.01, 241.74, 242.33, 242.57, 242.90, 243.09, 243.36, 243.66, 243.92, 243.47, 242.68, 241.87, 241.14, 240.75, 240.28, 239.76, 238.98, 238.21, 237.59, 236.87, 236.19, 235.53, 234.87, 234.27, 233.66, 233.04, 232.47, 231.97, 231.44, 231.30, 231.55, 231.69, 231.82, 231.71, 231.63, 231.56, 231.72, 231.79, 231.60, 231.42, 231.30, 231.23, 231.18, 231.05, 230.83, 230.70, 230.35, 229.92, 229.43, 229.09, 228.70, 228.33, 227.89, 227.52, 227.10];

        var sma50 = [193.23, 193.47, 193.73, 193.98, 194.22, 194.43, 194.63, 194.83, 195.07, 195.33, 195.59, 195.85, 196.11, 196.37, 196.63, 196.88, 197.21, 197.50, 197.83, 198.09, 198.39, 198.68, 198.93, 199.25, 199.52, 199.75, 199.97, 200.29, 200.63, 200.99, 201.35, 201.72, 202.10, 202.46, 202.85, 203.24, 203.50, 203.83, 204.19, 204.57, 204.96, 205.35, 205.76, 206.18, 206.61, 207.06, 207.52, 207.93, 208.36, 208.85, 209.28, 209.75, 210.25, 210.77, 211.25, 211.75, 212.23, 212.70, 213.18, 213.67, 214.20, 214.71, 215.18, 215.64, 216.15, 216.61, 217.09, 217.54, 217.94, 218.39, 218.75, 219.12, 219.59, 219.99, 220.31, 220.55, 220.74, 220.82, 220.89, 221.00, 221.09, 221.24, 221.36, 221.48, 221.57, 221.61, 221.75, 221.87, 222.02, 222.19, 222.42, 222.63, 222.86, 223.06, 223.23, 223.38, 223.50, 223.64, 223.78, 223.91, 223.99, 224.06, 224.09, 224.13, 224.25, 224.34, 224.47, 224.60, 224.71, 224.75, 224.72, 224.70, 224.76, 224.84, 224.86, 224.91, 224.93, 225.04, 225.25, 225.45, 225.74, 225.99, 226.19, 226.45, 226.84, 227.30, 227.84, 228.36, 228.82, 229.25, 229.68, 230.07, 230.50, 230.93, 231.42, 231.89, 232.33, 232.74, 233.07, 233.42, 233.70, 234.03, 234.37, 234.72, 234.88, 234.89, 234.93, 235.02, 235.18, 235.31, 235.45, 235.57, 235.66, 235.83, 235.98, 236.07, 236.13, 236.18, 236.24, 236.36, 236.49, 236.67, 236.84, 237.01, 237.11, 237.22, 237.29, 237.31, 237.20, 237.09, 236.91, 236.81, 236.65, 236.43, 236.15, 235.87, 235.54, 235.23, 234.94, 234.64, 234.35, 233.95, 233.57, 233.16, 232.71, 232.30, 231.92, 231.53, 231.18, 230.77];

        var ema12 = [197.43, 197.47, 197.60, 197.46, 197.23, 197.20, 197.03, 196.98, 197.10, 197.43, 197.65, 197.89, 198.11, 198.38, 198.71, 199.00, 199.60, 200.12, 201.10, 201.67, 202.45, 203.18, 203.47, 204.19, 204.79, 205.24, 205.69, 206.91, 208.14, 209.27, 210.44, 211.68, 212.58, 213.40, 214.23, 215.02, 214.74, 214.98, 215.39, 215.77, 216.08, 216.15, 216.26, 216.53, 216.77, 217.13, 217.54, 217.63, 217.84, 218.16, 218.56, 218.95, 219.62, 220.10, 220.07, 220.39, 220.33, 220.33, 220.54, 220.98, 221.66, 222.16, 222.29, 222.37, 222.89, 223.03, 223.60, 223.94, 224.32, 224.76, 224.73, 224.93, 225.49, 225.83, 225.58, 224.71, 223.58, 222.69, 222.06, 221.90, 221.76, 222.44, 222.58, 222.80, 222.90, 222.69, 222.29, 222.29, 222.74, 223.29, 224.17, 224.66, 225.19, 225.61, 225.81, 225.91, 225.91, 225.80, 225.82, 225.91, 225.74, 225.52, 225.44, 225.35, 225.38, 225.61, 225.76, 225.94, 226.09, 225.98, 225.71, 225.37, 225.51, 225.68, 225.85, 225.95, 226.22, 226.96, 228.49, 229.83, 231.27, 232.38, 233.38, 234.46, 235.87, 237.00, 238.10, 239.03, 239.41, 239.87, 240.26, 241.08, 241.68, 242.30, 243.15, 243.42, 243.24, 243.19, 242.96, 243.08, 243.08, 243.21, 243.45, 243.78, 242.37, 240.05, 238.20, 236.89, 236.38, 235.86, 235.27, 234.46, 233.71, 233.63, 233.60, 233.26, 232.63, 232.17, 231.79, 231.74, 231.58, 231.71, 232.20, 232.65, 232.52, 232.48, 232.22, 232.22, 232.11, 232.00, 231.78, 231.99, 231.84, 231.46, 231.22, 230.88, 230.39, 230.13, 229.66, 229.25, 229.08, 228.51, 228.17, 227.71, 227.33, 226.89, 226.34, 225.89, 225.63, 225.22];

        var rsi = [61.38, 55.13, 57.46, 49.99, 47.11, 51.42, 47.66, 50.27, 54.73, 59.69, 58.22, 59.30, 59.68, 61.94, 64.11, 64.47, 71.60, 71.86, 79.17, 69.70, 73.51, 74.42, 64.40, 70.51, 70.51, 68.69, 69.74, 78.25, 79.73, 80.39, 81.88, 83.43, 78.89, 79.37, 80.46, 81.17, 57.79, 63.46, 65.55, 66.03, 65.70, 61.40, 62.22, 64.45, 64.66, 66.72, 68.13, 61.36, 63.43, 65.43, 67.34, 67.98, 72.26, 69.53, 58.44, 63.58, 56.39, 57.11, 60.36, 63.93, 67.63, 65.82, 59.30, 58.64, 64.93, 58.54, 64.06, 61.33, 62.48, 64.01, 56.00, 58.98, 63.87, 61.15, 51.90, 43.24, 39.15, 40.13, 42.13, 47.76, 47.76, 58.03, 51.90, 53.19, 52.11, 47.96, 45.23, 50.03, 55.56, 57.48, 61.84, 58.04, 59.22, 58.72, 56.12, 55.07, 53.46, 51.57, 53.35, 54.63, 49.90, 48.48, 50.60, 50.28, 52.21, 56.47, 55.33, 56.28, 56.28, 50.11, 45.79, 43.43, 53.69, 54.64, 55.30, 54.03, 58.16, 66.94, 76.46, 76.82, 79.15, 76.26, 76.78, 78.67, 82.03, 80.33, 81.37, 80.91, 69.83, 71.29, 71.29, 76.08, 73.60, 74.64, 77.50, 66.37, 58.29, 59.52, 55.97, 60.22, 58.40, 60.13, 62.05, 63.71, 38.61, 30.12, 31.67, 35.42, 43.13, 42.29, 40.87, 38.11, 37.56, 45.18, 45.58, 42.28, 38.94, 39.87, 40.11, 44.51, 43.00, 47.10, 52.52, 52.94, 45.82, 46.98, 43.93, 47.36, 45.85, 45.63, 43.79, 50.51, 45.58, 42.20, 43.61, 41.64, 38.91, 42.06, 38.63, 38.42, 42.16, 36.33, 39.34, 37.03, 37.03, 35.50, 32.97, 33.40, 36.85, 34.00];

        // BUY/SELL signals
        var buyDates = [], buyPrices = [], buyTexts = [];
        var sellDates = [], sellPrices = [], sellTexts = [];
        buyDates.push('2026-01-12 14:30');
        buyPrices.push(203.00);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-13 14:30');
        buyPrices.push(208.20);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-14 14:30');
        buyPrices.push(219.40);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-15 14:30');
        buyPrices.push(218.10);
        buyTexts.push('AL (%67)');
        buyDates.push('2026-01-16 14:30');
        buyPrices.push(222.70);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-19 14:30');
        buyPrices.push(223.00);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-20 14:30');
        buyPrices.push(226.00);
        buyTexts.push('AL (%67)');
        buyDates.push('2026-01-22 14:30');
        buyPrices.push(226.30);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-23 14:30');
        buyPrices.push(225.90);
        buyTexts.push('AL (%67)');
        buyDates.push('2026-01-27 14:30');
        buyPrices.push(227.70);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-28 14:30');
        buyPrices.push(243.20);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-29 14:30');
        buyPrices.push(247.80);
        buyTexts.push('GÃ¼Ã§lÃ¼ AL (%82)');
        buyDates.push('2026-01-30 14:30');
        buyPrices.push(245.60);
        buyTexts.push('AL (%67)');
        sellDates.push('2026-02-02 14:30');
        sellPrices.push(229.60);
        sellTexts.push('SAT (%67)');
        sellDates.push('2026-02-05 14:30');
        sellPrices.push(227.00);
        sellTexts.push('GÃ¼Ã§lÃ¼ SAT (%82)');
        sellDates.push('2026-02-06 15:00');
        sellPrices.push(223.00);
        sellTexts.push('GÃ¼Ã§lÃ¼ SAT (%82)');

        // Price chart traces
        var tracePrice = {
            x: dates,
            y: prices,
            customdata: dailyChanges,
            type: 'scatter',
            mode: 'lines',
            name: 'KapanÄ±ÅŸ FiyatÄ±',
            line: { color: '#1a1a1a', width: 2 },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>Fiyat: %{y:.2f} TL<br>GÃ¼nlÃ¼k DeÄŸiÅŸim: %{customdata:.2f}%<extra></extra>',
            yaxis: 'y'
        };

        var traceSMA20 = {
            x: dates,
            y: sma20,
            type: 'scatter',
            mode: 'lines',
            name: 'SMA20',
            line: { color: '#4285F4', width: 1.5, dash: 'dot' },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>SMA20: %{y:.2f} TL<extra></extra>',
            yaxis: 'y'
        };

        var traceSMA50 = {
            x: dates,
            y: sma50,
            type: 'scatter',
            mode: 'lines',
            name: 'SMA50',
            line: { color: '#FBBC05', width: 1.5, dash: 'dot' },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>SMA50: %{y:.2f} TL<extra></extra>',
            yaxis: 'y'
        };

        var traceEMA12 = {
            x: dates,
            y: ema12,
            type: 'scatter',
            mode: 'lines',
            name: 'EMA12',
            line: { color: '#34D399', width: 1.5, dash: 'dash' },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>EMA12: %{y:.2f} TL<extra></extra>',
            yaxis: 'y'
        };

        var signalLine = [];
        for (let i = 0; i < buyDates.length; i++) {
            signalLine.push({date: buyDates[i], price: buyPrices[i], type: 'BUY'});
        }
        for (let i = 0; i < sellDates.length; i++) {
            signalLine.push({date: sellDates[i], price: sellPrices[i], type: 'SELL'});
        }
        signalLine.sort((a, b) => new Date(a.date) - new Date(b.date));
        var signalLineX = signalLine.map(p => p.date);
        var signalLineY = signalLine.map(p => p.price);

        var traceSignalLine = {
            x: signalLineX,
            y: signalLineY,
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Sinyal FiyatÄ± (Turuncu)',
            line: { color: '#F97316', width: 2, dash: 'solid' },
            marker: { color: '#F97316', size: 6 },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>Sinyal FiyatÄ±: %{y:.2f} TL<extra></extra>',
            yaxis: 'y'
        };

        var traceBuySignals = {
            x: buyDates,
            y: buyPrices,
            text: buyTexts,
            type: 'scatter',
            mode: 'markers',
            name: 'AL Sinyali',
            marker: { color: '#22C55E', size: 12, symbol: 'triangle-up', line: { color: '#fff', width: 2 } },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>Fiyat: %{y:.2f} TL<br>%{text}<extra></extra>',
            yaxis: 'y'
        };

        var traceSellSignals = {
            x: sellDates,
            y: sellPrices,
            text: sellTexts,
            type: 'scatter',
            mode: 'markers',
            name: 'SAT Sinyali',
            marker: { color: '#EF4444', size: 12, symbol: 'triangle-down', line: { color: '#fff', width: 2 } },
            hovertemplate: '<b>%{x|%Y-%m-%d %H:%M}</b><br>Fiyat: %{y:.2f} TL<br>%{text}<extra></extra>',
            yaxis: 'y'
        };

        // RSI chart trace
        var traceRSI = {
            x: dates,
            y: rsi,
            type: 'scatter',
            mode: 'lines',
            name: 'RSI(14)',
            line: { color: '#A855F7', width: 2 },
            hovertemplate: '<b>%{x}</b><br>RSI: %{y:.1f}<extra></extra>',
            yaxis: 'y2',
            xaxis: 'x'
        };

        var traceRSI70 = {
            x: dates,
            y: Array(dates.length).fill(70),
            type: 'scatter',
            mode: 'lines',
            name: 'RSI 70 (AÅŸÄ±rÄ± AlÄ±m)',
            line: { color: '#EF4444', width: 1, dash: 'dash' },
            showlegend: false,
            hoverinfo: 'skip',
            yaxis: 'y2',
            xaxis: 'x'
        };

        var traceRSI30 = {
            x: dates,
            y: Array(dates.length).fill(30),
            type: 'scatter',
            mode: 'lines',
            name: 'RSI 30 (AÅŸÄ±rÄ± SatÄ±ÅŸ)',
            line: { color: '#22C55E', width: 1, dash: 'dash' },
            showlegend: false,
            hoverinfo: 'skip',
            yaxis: 'y2',
            xaxis: 'x'
        };

        // Layout configuration
        var layout = {
            title: {
                text: 'TUPRS - Son 586 GÃ¼nlÃ¼k Teknik Analiz',
                font: { size: 18, color: '#1a1a1a' }
            },
            xaxis: {
                title: 'Tarih',
                type: 'date',
                tickformat: '%Y-%m',
                nticks: 12,
                showgrid: true,
                gridcolor: '#e5e5e5'
            },
            yaxis: {
                title: 'Fiyat (â‚º)',
                domain: [0.3, 1],
                showgrid: true,
                gridcolor: '#e5e5e5'
            },
            yaxis2: {
                title: 'RSI',
                domain: [0, 0.25],
                range: [0, 100],
                showgrid: true,
                gridcolor: '#e5e5e5'
            },
            hovermode: 'closest',
            plot_bgcolor: '#fafafa',
            paper_bgcolor: '#ffffff',
            font: { family: 'Segoe UI, Arial', size: 12 },
            legend: {
                x: 0,
                y: 1.1,
                orientation: 'h',
                bgcolor: 'rgba(255,255,255,0.9)',
                bordercolor: '#e5e5e5',
                borderwidth: 1
            },
            margin: { t: 100, b: 80, l: 80, r: 50 }
        };

        var config = {
            responsive: true,
            displayModeBar: true,
            displaylogo: false,
            modeBarButtonsToRemove: ['toImage', 'sendDataToCloud'],
            locale: 'tr'
        };

        // Render chart
        var data = [tracePrice, traceSignalLine, traceSMA20, traceSMA50, traceEMA12, traceBuySignals, traceSellSignals, traceRSI, traceRSI70, traceRSI30];
        Plotly.newPlot('chart', data, layout, config);
    </script>
</body>
</html>